@using WereViewApp.Models.EntityModel.ExtenededWithCustomMethods
@model WereViewApp.Models.EntityModel.App

@{
    //Layout = "~/Views/Shared/_LayoutFrontEnd.cshtml";
    var appName = Model.AppName;
    var currentUrl = @Html.GetCurrentURLString();
    ViewBag.Title = Model.Platform.PlatformName + " : " + appName;
    ViewBag.Meta = appName + "," + @Model.Tags + "," + Model.Description;
    ViewBag.Keywords = appName + "," + @Model.Tags;
    var tagsList = @Model.Tags != null ? @Model.Tags.Split(',') : null;
    var isFrist = true;

    string appSubtitle = ViewBag.Title;
    var platformSubtitle = Model.Platform.PlatformName + " mobile apps";
    var categorySubtitle = Model.GetCategoryString() + " category mobile apps";
    var appUrl = AppVar.Url;
}


<div class="app-details-page" id="app-deails-page">
    <div id="fb-root"></div>
    <div class="row" itemscope itemtype="http://schema.org/Product">
        <div class="col-md-12 app-detail app-title-wrapper">
            <div class="app-title-row float-left">
                <a href="@appUrl/Apps/@Model.Platform.PlatformName" class="app-platform" title="@platformSubtitle">
                    <i class="@Model.Platform.Icon" title="@platformSubtitle">
                        <em title="@platformSubtitle" class="seo-hide">@platformSubtitle</em>
                    </i>
                </a>
                @Html.Partial("_AppEditButton")
                <a href="@currentUrl" class="app-title" title="@appSubtitle">
                    <h1 title="@appSubtitle">
                        <strong title="@appSubtitle">
                            <em itemprop="name" title="@appSubtitle">
                                @appName
                            </em>
                        </strong>
                    </h1>
                    <span class="paragraph-end"></span>
                </a>
                <a href="@appUrl/Apps/Category/@Model.Category.CategoryName" class="app-category" title="@categorySubtitle">
                    <h2 class="category" title="@categorySubtitle">
                        <strong title="@categorySubtitle">@Model.Category.CategoryName</strong>
                    </h2>
                </a>
                <span class="paragraph-end"></span>
            </div>
        </div>
    </div>
    <div id="blog" class="blog-pages">
        <div class="b-post">
            @Html.Partial("_Gallery")
            <div class="row">
                <div class="col-md-9">
                    <div class="row">
                        @Html.Partial("_RatingAndViewed")
                    </div>
                    <ul class="post-info seo-optimize">
                        <li>
                            By <a href="@appUrl/Developer/@Model.User.UserName">
                                <h1>
                                    <strong>
                                        <em title="@Model.User.FirstName @Model.User.LastName developer apps">@Model.User.FirstName @Model.User.LastName</em>
                                    </strong>
                                </h1>
                            </a> <span> . </span>
                        </li>
                        <li>
                            <a href="#" class="report-app">
                                <h1>
                                    <strong>
                                        <em>Report</em>
                                    </strong>
                                </h1>
                            </a> <span> . </span>
                        </li>
                        <li>
                            <a href="@Model.WebSiteURL" title="Official Website for @Model.AppName">
                                <h1 title="Official Website for @Model.AppName">
                                    <strong title="Official Website for @Model.AppName">
                                        <em title="Official Website for @Model.AppName">Website</em>
                                    </strong>
                                </h1>
                            </a> <span> . </span>
                        </li>
                        <li>
                            <a href="@Model.StoreURL" title="@Model.AppName download">
                                <h1>
                                    <strong>
                                        <em>Store</em> <em title="@Model.AppName download" class="seo-hide">@Model.AppName download</em>
                                    </strong>
                                </h1>
                            </a> <span> . </span>
                        </li>
                        <li title="Published date">
                            @Html.DisplayDate(Model.CreatedDate) <span> . </span>
                        </li>
                        <li class="app-edit-button">
                            @Html.Partial("_AppEditButton")
                        </li>

                        <li class="share-btn write-review-btn white">
                            <a href="#.">
                                <h1>
                                    <strong>
                                        <em>Write Review</em>
                                    </strong>
                                </h1>
                            </a>
                        </li>

                        <li class="share-btn facebook">
                            <div class="fb-like" data-href="http://localhost:2191/apps-details-page-2.html" data-width="110px" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
                        </li>
                    </ul>
                    <div class="app-description seo-optimize">
                        @Html.Truncate(Model.Description, 200, false)
                        <span class="show-more-btns-container" data-ref="app-description">
                            <span class="elipse-dot">...</span>
                            <a class="see-more-btn" data-ref="app-description">see more</a>
                        </span>
                        <div class="more" data-ref="app-description">
                            @Html.Truncate(Model.Description, 200, -1) <a id="app-description-see-less-btn" class="hideLink">less</a>
                            <a class="less-btn" data-ref="app-description">less</a>
                            @if (tagsList != null) {
                                <div class="tagbox">
                                    <i class="fa fa-tag"></i> Tags:
                                    @foreach (var tag in tagsList) {
                                        if (!isFrist) {
                                            <text>,</text>
                                        }
                                        <a class="Plant tag-item" href="@appUrl/Tags/" title="@platformSubtitle : @Model.AppName is a type of @tag">
                                            <h1 title="@platformSubtitle : @Model.AppName is a type of @tag">
                                                <em title="@Model.AppName" class="seo-hide">@Model.AppName</em>
                                                @tag
                                            </h1>
                                        </a>
                                        {
                                            isFrist = false;
                                        }
                                    }
                                </div>
                            }
                            <div class="punlished-date">
                                <i class="fa fa-calendar-o"></i>
                                @Html.DisplayDate(Model.CreatedDate)
                            </div>
                        </div>
                        <div class="clear"></div>
                    </div>
                    @{ Html.RenderAction("ReviewsDisplay", "Partials", new { id = Model.AppID }); }
                    <div id="write-review-form-container">

                    </div>
                    <div id="review-request-fields">
                        @Html.HiddenFor(n => n.AppID)
                        @Html.AntiForgeryToken()
                    </div>
                </div>
                <div class="col-md-3">
                    @{ Html.RenderAction("FeaturedApps", "Partials", new { appID = Model.AppID }); }
                    @*@{Html.RenderAction("DevelopersApps", "Partials", new { appID = Model.AppID }); }*@
                    @{ Html.RenderAction("SuggestedApps", "Partials", new { appID = Model.AppID }); }
                </div>
            </div>
        </div>
    </div>
</div>
